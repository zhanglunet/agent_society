# 智能体工作台 UI/UX 统一方案（简约现代 · 明亮/黑暗主题）

## 1. 目标与原则

### 1.1 目标
- 统一整站视觉语言：组织侧栏、标签页、智能体列表、聊天、弹窗（工件/组织模板/插件/设置）风格一致。
- 简约现代：减少噪音（过强对比/过多边框/图标乱用），用清晰的层级与留白建立秩序。
- 必要交互效果：hover/active/selected/focus/disabled/loading/error 空态一致。
- 支持明亮 + 黑暗主题，并可扩展“跟随系统”。

### 1.2 设计原则（可落地）
- 单一真源：所有颜色/圆角/阴影/间距/字号从 Tokens 派生，禁止在组件里“写死”风格值。
- 层级优先：用 Surface（背景/表面层级）表达结构，而不是靠大面积纯黑/纯白。
- 反馈克制：动效只用于“状态变化”的反馈，不做装饰性动画。
- 可读性优先：对比度、字号与行高优先于“好看”。

---

## 2. 信息架构与布局（不改功能，仅统一体验）

### 2.1 页面骨架
保持三段式结构：
- 左：组织全局侧栏（包含 4 个全局入口：设置/工件/组织模板/插件管理）
- 中：工作区（Tab strip + 当前 Tab 的智能体列表）
- 右：主内容（聊天视图 / 组织视图）

### 2.2 “窗口系统”（统一弹窗/浮窗）
工件管理器、组织模板、插件管理、设置模态统一遵循：
- 统一标题栏：标题 + 右侧操作按钮（最大化/还原、关闭；可选最小化）
- 统一容器：统一圆角、阴影、边框、背景与分割线
- 统一布局：窗口内容默认采用双栏（左列表、右详情）

---

## 3. 设计 Tokens（Light/Dark）

### 3.1 Tokens 组织方式
建议以 CSS 变量作为设计系统“单一真源”：
- 基础色（Base）
- 语义色（Semantic：primary/danger/warning/info）
- 文本层级（Text）
- 表面层级（Surface）
- 线条与阴影（Border/Shadow）
- 尺度（Radius/Space/Font/Line-height）

> 说明：具体色值可在实现阶段微调，但必须保证对比度与一致性。

### 3.2 颜色 Tokens（推荐值）

#### 明亮主题（Light）
| Token | 值 | 用途 |
|---|---|---|
| `--bg` | `#F6F7FB` | 页面背景 |
| `--surface-1` | `#FFFFFF` | 主要卡片/内容表面 |
| `--surface-2` | `#F1F3F7` | 次级表面（侧栏背景、分组底） |
| `--text-1` | `#0F172A` | 主文本 |
| `--text-2` | `#475569` | 次文本 |
| `--text-3` | `#94A3B8` | 弱化信息（时间戳、提示） |
| `--border` | `rgba(15,23,42,.12)` | 边框/分割线 |
| `--primary` | `#16A34A` | 主色（按钮、选中、强调） |
| `--primary-weak` | `rgba(22,163,74,.12)` | 选中底/标签底/气泡底 |
| `--danger` | `#EF4444` | 错误/删除 |
| `--warning` | `#F59E0B` | 警告 |
| `--info` | `#3B82F6` | 信息 |

#### 黑暗主题（Dark）
| Token | 值 | 用途 |
|---|---|---|
| `--bg` | `#0B0F17` | 页面背景 |
| `--surface-1` | `#111827` | 主要表面 |
| `--surface-2` | `#0F172A` | 次级表面 |
| `--text-1` | `#E5E7EB` | 主文本 |
| `--text-2` | `#A1A1AA` | 次文本 |
| `--text-3` | `#6B7280` | 弱化信息 |
| `--border` | `rgba(255,255,255,.10)` | 边框/分割线 |
| `--primary` | `#22C55E` | 主色 |
| `--primary-weak` | `rgba(34,197,94,.14)` | 主色弱底 |
| `--danger` | `#F87171` | 错误/删除 |
| `--warning` | `#FBBF24` | 警告 |
| `--info` | `#60A5FA` | 信息 |

### 3.3 尺度 Tokens（全局统一）
| Token | 推荐值 | 说明 |
|---|---:|---|
| `--r-sm` | `8px` | 小圆角（按钮、小卡片） |
| `--r-md` | `12px` | 中圆角（面板、输入框） |
| `--r-lg` | `16px` | 大圆角（浮窗） |
| `--space-1..6` | `4/8/12/16/20/24px` | 只用这几档，避免“乱飘” |
| `--font-12/13/14/16/18` | 12–18px | 字号阶梯 |
| `--lh-body` | `1.5` | 正文行高 |
| `--lh-list` | `1.35` | 列表行高 |

### 3.4 阴影 Tokens（层级）
- `--shadow-1`：轻（卡片 hover/选中）
- `--shadow-2`：中（模态/浮窗默认）
- `--shadow-3`：重（拖拽/最大化/聚焦窗口）

---

## 4. 核心组件规范（统一外观 + 状态）

### 4.1 Button（按钮体系）
统一 4 类：
- Primary：主操作（使用 `--primary`）
- Secondary：次操作（中性表面 + 边框）
- Ghost/IconButton：图标按钮（透明底 + hover 表面）
- Danger：删除/终止

统一状态矩阵（所有按钮必须具备）：
- default / hover / active / focus / disabled / loading

交互细则：
- hover：背景轻微变化 + 指针
- active：下压 1px（或轻微缩放 0.98）+ 取消过强阴影
- focus：2px 主色 focus ring（可访问性必需）

### 4.2 List Item（列表项：组织/智能体/插件）
统一结构：
- 左：图标/头像（统一圆角方块或圆形，二选一）
- 中：标题 + 次描述
- 右：状态/计数/快捷动作（hover 才显示）

状态：
- default：透明或 surface
- hover：`surface-1`/轻高亮
- selected：`primary-weak` 背景 + 左侧 2px 主色条（或顶部标记）
- disabled：降低对比度 + 禁用指针

### 4.3 Tab（标签页）
建议胶囊风格（现代产品一致性好）：
- 未选中：透明底 + `text-2`
- hover：`surface-1`
- 选中：`surface-1` + `shadow-1` + `text-1`
- close：仅在 hover/选中态出现，减少噪音

### 4.4 Chat（聊天）
目标：保留微信“左右气泡”的可读性，但让“工具/思考/工件”呈现更产品化。

消息气泡：
- 我方（user）：`primary-weak` 背景（dark 下也保持弱底）+ 文本 `text-1`
- 对方：`surface-1` 气泡
- 气泡圆角统一 `--r-md`，间距统一 `--space-*`

“思考过程 / 工具调用 / 工件卡片”统一为 Card（可折叠）：
- Header：标题 + 状态 badge（running/success/error）+ 折叠箭头
- Body：内容区域（必要时等宽字体），提供复制按钮
- 默认折叠（减少信息噪音），但要有清晰提示“可展开”

### 4.5 Window（浮窗/管理器）
统一为 Window 组件：
- Header：标题 + actions（最大化/还原、关闭）
- Body：双栏布局（左列表 + 右详情）
- 分割线：统一用 `--border`
- 窗口层级：所有窗口 z-index 统一规划（避免互相盖错）

### 4.6 Modal（模态：设置、错误）
统一规范：
- overlay：`rgba(0,0,0,.35)`（dark 下可略浅）
- content：`surface-1` + `shadow-2` + `r-lg`
- 表单：输入高度统一 36/40px；focus ring 统一

---

## 5. 动效与反馈（必要且克制）

统一动效参数：
- duration：150–200ms
- easing：`cubic-bezier(0.2, 0, 0, 1)`

推荐使用场景：
- hover/active/focus 的轻反馈
- 折叠展开（高度 + 透明度）
- 列表加载 Skeleton（替代“加载中...”纯文字）

禁止/避免：
- 连续循环动画（除非明确表示 loading）
- 大幅位移动画（影响阅读与效率）

---

## 6. 可访问性与可用性（必须达标）
- 对比度：正文至少 4.5:1；弱化文字至少 3:1。
- Focus：所有可交互元素必须有可见 focus ring。
- 点击热区：IconButton 最小 32×32；列表项高度建议 ≥ 44px。
- 键盘：Tab 可遍历主要操作；Esc 关闭模态/窗口（与现有行为保持一致）。

---

## 7. 主题切换策略

### 7.1 切换方式
- `data-theme="light|dark|system"`（推荐）
- system 使用 `prefers-color-scheme` 自动选择

### 7.2 落地规则
- 只允许使用 tokens；禁止组件写死颜色。
- legacy/v2 的样式冲突，靠“命名空间或层级（CSS Layer）”解决，保证覆盖关系稳定。

---

## 8. 现状问题与收敛策略（用于实现阶段的指导）

### 8.1 现状主要问题
- 两套 CSS 并存且同名选择器冲突（按钮、窗口、toast、chat 等），导致风格割裂。
- 同一页面内同时出现“深色侧栏 + 浅色聊天 + 深色浮窗”的混搭，缺少统一层级与色板。

### 8.2 收敛路径（实现阶段）
1) 先建立 tokens + 基础组件规范（Button/Window/Modal/List/Tab/Input/Badge）。
2) 给 v2 布局与 legacy 组件加“可控覆盖层级”（CSS Layer 或命名空间）。
3) 先统一结构性组件：侧栏、tab、列表（视觉稳定后再统一聊天细节）。
4) 最后统一窗口类（工件/模板/插件）与表单模态（设置）。

---

## 9. 验收清单（你可以用来验收实现）
- 主题：明亮/黑暗切换后，页面主结构与所有窗口/模态均一致变更，无“局部还停留在另一个主题”的情况。
- 组件一致性：按钮、列表项、tab、窗口标题栏、分割线在所有模块中完全一致。
- 交互一致性：hover/active/focus/disabled/loading 表现一致。
- 可读性：聊天区、工具/思考/工件区域的层级清晰，默认不干扰阅读。
- 细节：对齐/间距统一，无明显“圆角不同/字体不同/阴影不同”的割裂感。

