# 用户体验设计方案 (UX Design)

## 1. 核心设计原则
- **信息分层**: 遵循三段式布局，从左到右依次为“全局导航”、“组织与智能体选择”、“内容工作区”，符合用户从宏观到微观的操作路径。
- **即时反馈**: 所有耗时操作（发送消息、创建智能体）必须有 Loading 或进度反馈；hover 和选中态提供明确的视觉暗示。
- **空间效率**: 利用可调节宽度的 `Splitter` 布局，允许用户根据需要调整侧栏和聊天区的占比。

## 2. 页面骨架与布局
### 2.1 嵌套布局结构 (Hierarchical Layout)
1.  **第一层：全局框架 (App Shell)**:
    - **左侧全局侧栏 (Global Sidebar)**: 宽度固定 (64px - 80px)，支持点击收缩。
        - **顶部工具栏 (Global Toolbar)**: 存放全局管理入口（总览视图、工件管理器、系统设置）。
        - **组织列表 (Org List)**: 存放由 root 创建的所有组织，以图标或缩写形式垂直排列。
    - **右侧主容器**: 填充剩余屏幕空间，承载 **标签页系统**。
2.  **第二层：标签页系统 (Workspace Tabs)**:
    - 顶部为胶囊风格的标签栏。
    - 标签内容区（Tab Panel）是工作区的核心容器。
3.  **第三层：工作区内部布局 (Inner Workspace)**:
    - 在每个标签页内部，采用 **Splitter (水平分割)** 布局：
        - **左侧边栏 (Agent Sidebar)**: 当前组织的智能体列表，支持搜索和选择。
        - **右侧内容区 (Main Content)**: 聊天视图或组织视图。

### 2.2 视觉层级示意
```text
[Global Sidebar] | [Tabs Header (Org A) (Org B) (Org C) ...]
                 |-------------------------------------------
                 | [Agent Sidebar] | [Main Content (Chat)]
                 | (Inner Left)    | (Inner Right)
```

### 2.2 窗口系统 (Windowing)
- 采用 **Overlay/Dialog** 承载复杂的功能管理（如工件管理器）。
- 所有弹窗遵循“标题栏 + 双栏内容”规范，左侧为分类/列表，右侧为详情/配置。

## 3. 核心交互流程
### 3.1 聊天交互
- **输入**: 支持多行文本输入、代码块识别、附件拖拽。
- **发送**: 点击发送或 Ctrl+Enter。发送后气泡立即出现在列表中，状态为“发送中”。
- **思考过程**: 智能体生成消息时，若包含“思考过程”，以可折叠卡片形式实时流式展示。
- **工件生成**: 若智能体生成了代码或文档（Artifacts），聊天区显示缩略卡片，点击在弹窗中打开完整预览。

### 3.2 组织与智能体管理
- **Tab 切换**: 切换 Tab 时，中间列表平滑过渡显示对应组织的智能体。
- **搜索/过滤**: 输入关键字时，列表实时高亮并过滤结果。

## 4. 交互逻辑细节
- **Hover 反馈**: 列表项 hover 时显示快速操作按钮（如删除、收藏）。
- **Active 动画**: 按钮点击时触发 1px 下压效果，增强点击感。
- **Scroll 管理**: 新消息到达时，聊天区自动平滑滚动到底部，除非用户手动向上滚动了超过一定距离。

## 5. 使用用例 (Use Cases)
- **用例 1: 快速提问**: 用户通过侧栏选中智能体，在输入框提问，观察思考过程，获取最终答案。
- **用例 2: 工件管理**: 用户在对话中生成了一个网页原型，点击卡片打开工件管理器，在双栏布局中查看历史版本并导出。
- **用例 3: 组织扩建**: 用户点击“组织模板”，选择预设架构，一键生成多级智能体社会。

## 6. 状态转换逻辑
- **加载状态**: 全局数据初始化 -> 骨架屏展现 -> 数据渲染完成。
- **空状态**: 当某个组织下没有智能体时，显示“暂无智能体”引导提示。
- **断网/异常**: 通信中断时，顶部显示窄条警示，并尝试自动重连。
