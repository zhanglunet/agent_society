# chrome

## 综述
该目录包含 6 个文件与 1 个子目录，直接文件类型以 .js、.md 为主，用于承载本层级的实现与配置。

## 文件列表
- browser_manager.js: 功能：实现模块逻辑。责任：为上层提供可复用能力或入口。内部结构：头部说明“浏览器管理器 负责 Chrome 浏览器实例的启动、关闭和生命周期管理。”，导出符号：BrowserManager。
- chrome.md: 功能：本目录说明文档。责任：描述目录综述、文件列表与子目录列表。内部结构：包含“综述 / 文件列表 / 子目录列表”三部分。
- index.js: 功能：实现模块逻辑。责任：为上层提供可复用能力或入口。内部结构：头部说明“Chrome 浏览器控制模块 提供无头浏览器操作能力，包括浏览器管理、标签页管理、页面导航、内容读取和页面交互。”，导出符号：（未匹配到明显的导出符号）。
- page_actions.js: 功能：实现模块逻辑。责任：为上层提供可复用能力或入口。内部结构：头部说明“页面操作 负责页面导航、内容获取和页面交互。”，导出符号：PageActions。
- tab_manager.js: 功能：实现模块逻辑。责任：为上层提供可复用能力或入口。内部结构：头部说明“标签页管理器 负责 Chrome 标签页的创建、关闭和生命周期管理。”，导出符号：TabManager。
- tools.js: 功能：实现模块逻辑。责任：为上层提供可复用能力或入口。内部结构：头部说明“Chrome 模块工具定义 【工具组说明】chrome 工具组用于模拟人类访问和操作网页，适用于以下场景： - 访问需要 JavaScript 渲染的动态网页 - 执行页面交互操作（点击、输入、滚动等） - 获取页面截图或提取页面内容 - 处理登录、验证码等复杂流程 - 爬取需要模拟真实浏览器行为的网站 【与 http_request 的区别】 - http_request：用于调用已知的、确定的 API 接口（REST API、JSO”，导出符号：getToolDefinitions。

## 子目录列表
- web: 该目录包含 4 个文件与 0 个子目录，直接文件类型以 .css、.html、.js、.md 为主，用于承载本层级的实现与配置。（详见 web/web.md）。

## 新增功能说明

### 资源管理功能
模块新增了页面资源管理功能，包括：

1. **列出资源列表** (chrome_list_resources)
   - 获取页面上的各类资源（图片、CSS、JavaScript、视频、音频等）
   - 支持过滤资源类型
   - 支持包含或排除 data URL
   - 返回资源的 URL、类型、尺寸等详细信息

2. **保存资源到工件** (chrome_save_resource) - 2026-01-18 更新
   - **支持批量保存**：resourceUrls 参数改为数组，可一次性传入多个资源地址
   - 返回工件ID数组，对应每个资源的保存结果
   - 支持部分失败处理：即使某些资源保存失败，也会继续处理其他资源
   - 返回详细的成功/失败统计信息和错误详情
   - 支持普通 URL 和 data URL
   - 自动识别资源格式（png、jpg、gif、webp等）
   - 保存时记录来源页面信息（URL、标题等）

### 使用场景
- 批量下载页面图片
- 保存页面资源用于离线分析
- 收集网页素材
- 页面资源审计
- 内容归档

### 相关文档
- SAVE_RESOURCE_USAGE.md: 详细的使用说明和示例
- CHANGELOG.md: 变更历史和迁移指南
- FRONTEND_INTEGRATION.md: 前端集成说明，解释如何在聊天界面显示工件缩略图

### DevTools 调试采集功能
模块新增了 DevTools 调试采集能力，用于智能体在网页里进行调试与查看日志。

1. **启用调试采集** (chrome_open_devtools)
   - 为指定标签页启用 Console/页面异常/可选网络失败日志的采集与缓存
   - 支持设置最大缓存条数（环形缓冲）与启用前清空

2. **获取调试内容** (chrome_get_devtools_content)
   - 获取已采集的结构化日志条目
   - 支持按类型过滤与限制返回条数，可选择读取后清空缓存

3. **自动打开 DevTools 窗口（可选）**
   - `chrome_launch` 新增可选参数 `autoOpenDevtoolsForTabs`
   - 启用后会在创建/打开标签页时自动弹出 Chrome DevTools（会强制以有界面模式启动以保证参数生效）
