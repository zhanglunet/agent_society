# 核心模块 (core/)

## 概述

核心模块包含系统的核心功能，这些模块是系统运行的基础，不可替换。

## 模块列表

### agent_society.js
- **职责**：系统入口，面向用户的接口
- **功能**：
  - 初始化系统
  - 提交用户需求
  - 启动 HTTP 服务器
  - 优雅关闭管理
- **依赖**：Runtime, HttpServer

### runtime.js
- **职责**：运行时核心，协调各个子系统
- **功能**：
  - 协调平台能力与智能体行为
  - 管理智能体生命周期
  - 处理消息调度
  - 执行工具调用
  - 处理 LLM 交互
- **依赖**：MessageBus, OrgPrimitives, 各种服务模块

### message_bus.js
- **职责**：异步消息总线，负责智能体间消息传递
- **功能**：
  - 发送和接收消息
  - 延迟消息投递
  - 消息队列管理
  - 中断检测
- **依赖**：无

### org_primitives.js
- **职责**：组织原语，负责岗位和智能体的持久化存储
- **功能**：
  - 创建和管理岗位
  - 创建和管理智能体
  - 记录终止事件
  - 数据验证
- **依赖**：文件系统

## 设计原则

1. **单一职责**：每个模块只负责一个核心功能
2. **高内聚**：模块内部功能紧密相关
3. **低耦合**：模块间依赖关系清晰且单向
4. **不可替换**：这些模块是系统的核心，不能被其他实现替换

## 注意事项

- 核心模块的修改需要特别谨慎，因为它们影响整个系统
- 所有核心模块都应该有完整的测试覆盖
- 核心模块的公共接口应该保持稳定，避免频繁变更
